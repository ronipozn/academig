<div *ngIf="!streamRetrieved" class="d-flex justify-content-center mt-4">
  <div class="spinner-border text-secondary" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>

<!-- <mat-progress-bar *ngIf="!streamRetrieved"
                  style="margin: 0px 0px;"
                  [color]="color"
                  [mode]="mode">
</mat-progress-bar> -->

<div [hidden]="!streamRetrieved">

  <div style="background-image: linear-gradient(#283E73, #74B1CC);">
    <div class="py-2 px-3 text-white">
       <!-- [ngClass]="{'container-fluid': !isMobile}"> -->
      <h3 class="d-flex align-items-center mt-2"><i class="material-icons mr-2">bookmark</i> Academic Papers Kits</h3>
      <div class="d-flex align-items-center mb-3">
        <input #input (keyup)="applyFilter($event)" class="ais-SearchBox-input" [placeholder]="'Search papers kits...'" style="width: 100%; padding: 5px"/>
      </div>
    </div>
  </div>

  <div class="container-fluid" style="margin-bottom: 40px;">
    <div class="row mt-4">

      <!-- <div class="col-md-3 mb-2">
        <mat-accordion multi>
          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title>Discipline</mat-panel-title>
            </mat-expansion-panel-header>
          </mat-expansion-panel>

          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title>Topics</mat-panel-title>
            </mat-expansion-panel-header>
          </mat-expansion-panel>

          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title>University</mat-panel-title>
            </mat-expansion-panel-header>
          </mat-expansion-panel>

          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title>Country</mat-panel-title>
            </mat-expansion-panel-header>
          </mat-expansion-panel>

        </mat-accordion>
      </div> -->

      <div class="col-12">
      <!-- <div class="col-md-9"> -->

        <div *ngIf="streamRetrieved" class="table-container mat-elevation-z8">
          <table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)">

            <ng-container matColumnDef="link">
              <th style="width: 20%;" mat-header-cell *matHeaderCellDef mat-sort-header><b>Kit</b></th>
              <td style="width: 20%;" mat-cell *matCellDef="let row">
                <a [routerLink]="['/',row.universityLink,row.disciplineLink,row.labLink,'tools','papers-kit']" class="card-title">
                  <i class="fa fa-external-link" aria-hidden="true"></i>
                </a>
              </td>
            </ng-container>

            <ng-container matColumnDef="lab">
              <th style="width: 20%;" mat-header-cell *matHeaderCellDef mat-sort-header> <b>Lab</b> </th>
              <td style="width: 20%;" mat-cell *matCellDef="let row">
                <a [routerLink]="['/',row.universityLink,row.disciplineLink,row.labLink]" class="card-title">{{row.lab}}</a>
              </td>
            </ng-container>

            <ng-container matColumnDef="university">
              <th style="width: 2׳0%;" mat-header-cell *matHeaderCellDef mat-sort-header> <b>University</b> </th>
              <td style="width: 20%;" mat-cell *matCellDef="let row">
                <a [routerLink]="['/',row.universityLink]" class="card-title">{{row.university}}</a>
              </td>
            </ng-container>

            <ng-container matColumnDef="country">
              <th style="width: 2׳0%;" mat-header-cell *matHeaderCellDef mat-sort-header> <b>Country</b> </th>
              <td style="width: 20%;" mat-cell *matCellDef="let row">
                <a [routerLink]="['/',row.link]" class="card-title">{{row.country | country}}</a>
              </td>
            </ng-container>

            <ng-container matColumnDef="discipline">
              <th style="width: 2׳0%;" mat-header-cell *matHeaderCellDef mat-sort-header> <b>Discipline</b> </th>
              <td style="width: 20%;" mat-cell *matCellDef="let row">
                <a [routerLink]="['/',row.universityLink,row.disciplineLink]" class="card-title">{{row.discipline}}</a>
              </td>
            </ng-container>

            <ng-container matColumnDef="topics">
              <th style="width: 20%;" mat-header-cell *matHeaderCellDef mat-sort-header> <b>Topics</b> </th>
              <td style="width: 20%;" mat-cell *matCellDef="let row">
                <a [routerLink]="['/',row.link]" class="card-title">{{row.topics}}</a>
              </td>
            </ng-container>

            <ng-container matColumnDef="beginners">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> <b>Beginners</b> </th>
              <td mat-cell *matCellDef="let row">{{row.beginners}}</td>
            </ng-container>

            <ng-container matColumnDef="intermediate">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> <b>Intermediate</b> </th>
              <td mat-cell *matCellDef="let row">{{row.intermediate}}</td>
            </ng-container>

            <ng-container matColumnDef="advanced">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> <b>Advanced</b> </th>
              <td mat-cell *matCellDef="let row">{{row.advanced}}</td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <!-- Row shown when there is no matching data. -->
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="8">No data matching the filter "{{input.value}}"</td>
            </tr>
          </table>

        </div>

        <mat-paginator [pageSizeOptions]="[50, 100, 200]"></mat-paginator>

      </div>
    </div>

  </div>
</div>
