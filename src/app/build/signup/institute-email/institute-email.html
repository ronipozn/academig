<div [formGroup]="parentGroup">

  <!-- <img src="./assets/img/build/email.svg" style="max-height: 15rem;" class="mx-auto d-block img-fluid" alt="academig_welcome"> -->

  <h3 *ngIf="!(forkNum==2 || forkNum==3)" class="mb-2 text-center"><b>What is your {{labString[labType]}} email address?</b></h3>
  <h3 *ngIf="forkNum==2 || forkNum==3" class="mb-2 text-center"><b>Institutional emails</b></h3>

  <!-- <p class="mb-4 text-center text-muted">
    We'll never share your email with anyone.
  </p> -->

  <div class="col-10 col-sm-8 mx-auto">
  <div class="card">
  <div class="card-body">

    <ng-container *ngIf="forkNum==0 || forkNum==1 || forkNum==2 || forkNum==3 || forkNum==4 || forkNum==5">
      <p class="mb-4 text-center text-dark">
        Your {{labString[labType]}} email is a quick way to help us verify your identity.
      </p>
      <div *ngIf="forkNum && parentGroup.get('firstInstituteEmail').value!='' && parentGroup.get('firstInstituteEmail').value==parentGroup.get('secondInstituteEmail').value" class="alert alert-warning border-warning alert-dismissible fade show mb-4" role="alert">
        Please provide different emails for your institutional email and your principal investigator institutional email.
      </div>
      <div class="input-group" autocomplete="nope">
        <mat-form-field appearance="outline" [ngClass]="{ 'has-success': parentGroup.get('firstInstituteEmail').valid, 'has-danger': parentGroup.get('firstInstituteEmail').invalid && errorFlag[0] }">
          <mat-label>Your {{labString[labType]}} email</mat-label>
          <input matInput email (keydown)="onClick(0)" type="email" formControlName=firstInstituteEmail [required]=true>
          <span class="form-control-feedback">
            <i *ngIf="parentGroup.get('firstInstituteEmail').valid" class="material-icons">done</i>
            <i *ngIf="parentGroup.get('firstInstituteEmail').invalid && errorFlag[0]" class="material-icons">clear</i>
          </span>
        </mat-form-field>
        <div *ngIf="parentGroup.get('firstInstituteEmail').invalid && errorFlag[0]" class="small invalid-feedback py-0 my-0">
          <span *ngIf="parentGroup.get('firstInstituteEmail').value">Enter valid email</span>
          <span *ngIf="!parentGroup.get('firstInstituteEmail').value">Email is required</span>
        </div>
        <div *ngIf="!(parentGroup.get('firstInstituteEmail').invalid && errorFlag[0])" class="small invalid-feedback py-0 my-0">
          &nbsp;
        </div>
      </div>
    </ng-container>

    <ng-container *ngIf="forkNum==2 || forkNum==3 || forkNum==6 || forkNum==7">
      <div class="input-group">
        <mat-form-field appearance="outline" [ngClass]="{ 'has-success': parentGroup.get('secondInstituteEmail').valid, 'has-danger': parentGroup.get('secondInstituteEmail').invalid && errorFlag[1] }">
          <mat-label>{{(labType==0) ? 'Your principal investigator institutional ' : 'Contact person '}} email</mat-label>
          <input matInput email (keydown)="onClick(1)" type="email" formControlName=secondInstituteEmail>
          <span class="form-control-feedback">
            <i *ngIf="parentGroup.get('secondInstituteEmail').valid" class="material-icons">done</i>
            <i *ngIf="parentGroup.get('secondInstituteEmail').invalid && errorFlag[1]" class="material-icons">clear</i>
          </span>
        </mat-form-field>
        <span *ngIf="parentGroup.get('secondInstituteEmail').invalid && errorFlag[1]" class="small invalid-feedback py-0 my-0">
          <span *ngIf="parentGroup.get('secondInstituteEmail').value">Enter valid email</span>
          <span *ngIf="!parentGroup.get('secondInstituteEmail').value">Email is required</span>
        </span>
        <span *ngIf="!(parentGroup.get('secondInstituteEmail').invalid && errorFlag[1])" class="small invalid-feedback py-0 my-0">
          &nbsp;
        </span>
      </div>
      <build-modal-text-field [fieldType]=1
                              [itemTitle]="'Name'"
                              [labelRequired]=true
                              [controlName]="'secondName'"
                              [submitStatus]=errorFlag[2]
                              [itemExplain]="'Keep name between 2-30 characters.'"
                              [parentGroup]=parentGroup>
      </build-modal-text-field>
    </ng-container>

    <p *ngIf="forkNum==2 || forkNum==3" class="mt-3 text-center text-dark">
      We will send a request to your Principal Investigator after you confirm your institutional email.<br> Your lab profile will go live after we get both confirmations.<br>
    </p>

  </div>
  </div>
  </div>

  <div class="col-12 col-sm-11 col-md-9 mx-auto d-flex">
    <div class="mr-auto">
      <!-- <button type="button" (click)="toPrevious()" mat-raised-button class="btn btn-link">PREVIOUS</button> -->
    </div>
    <div class="">
      <button type="button" (click)="toStep()" mat-raised-button class="btn btn-light-blue">CONTINUE</button>
    </div>
  </div>

</div>
